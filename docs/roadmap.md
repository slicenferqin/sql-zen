# SQL-Zen Roadmap

## 版本规划

### v0.1.0 - MVP (预计 2 周)

**目标**: 最小可用版本，验证核心理念

#### 核心功能
- [ ] 项目基础架构搭建
  - [ ] TypeScript + ESM 配置
  - [ ] 基础目录结构
  - [ ] 开发环境配置 (ESLint, Prettier)

- [ ] Schema 文件系统
  - [ ] YAML Schema 解析器
  - [ ] Schema 验证工具
  - [ ] 示例 Schema 文件

- [ ] Agent 核心
  - [ ] LLM 集成 (Claude API)
  - [ ] execute_bash 工具实现
  - [ ] execute_sql 工具实现
  - [ ] 基础 System Prompt

- [ ] CLI 工具
  - [ ] `sql-zen init` - 初始化项目
  - [ ] `sql-zen ask "问题"` - 提问
  - [ ] `sql-zen validate` - 验证 Schema

- [ ] 数据库支持
  - [ ] PostgreSQL 连接器
  - [ ] SQLite 连接器 (用于测试)

#### 交付物
- 可运行的 CLI 工具
- 示例 Schema 和测试用例
- 基础文档

---

### v0.2.0 - 增强版 (预计 2 周)

**目标**: 提升可用性和稳定性

#### 功能增强
- [ ] 多模型支持
  - [ ] OpenAI GPT-4
  - [ ] 本地模型 (Ollama)
  - [ ] 模型配置切换

- [ ] Schema 工具增强
  - [ ] `sql-zen schema import` - 从数据库自动生成 Schema
  - [ ] `sql-zen schema diff` - Schema 变更检测
  - [ ] Schema 自动补全建议

- [ ] 安全增强
  - [ ] Docker 沙箱执行
  - [ ] SQL 注入防护
  - [ ] 查询超时控制

- [ ] 更多数据库
  - [ ] MySQL 连接器
  - [ ] ClickHouse 连接器

#### 交付物
- 多模型支持
- Schema 自动生成工具
- 安全沙箱环境

---

### v0.3.0 - 交互版 (预计 2 周)

**目标**: 提供更好的用户体验

#### 功能增强
- [ ] 交互式 CLI
  - [ ] REPL 模式
  - [ ] 历史记录
  - [ ] 自动补全

- [ ] Web UI (可选)
  - [ ] 简单的 Web 界面
  - [ ] 查询历史
  - [ ] 结果展示

- [ ] 结果处理
  - [ ] 表格格式化输出
  - [ ] CSV/JSON 导出
  - [ ] 简单图表 (ASCII)

- [ ] 上下文增强
  - [ ] 多轮对话支持
  - [ ] 查询历史参考
  - [ ] 常用查询收藏

#### 交付物
- 交互式 CLI
- 基础 Web UI
- 结果导出功能

---

### v0.4.0 - 企业版 (预计 3 周)

**目标**: 企业级功能

#### 功能增强
- [ ] 团队协作
  - [ ] Schema 版本控制
  - [ ] 查询共享
  - [ ] 权限管理

- [ ] 可观测性
  - [ ] 查询日志
  - [ ] 性能指标
  - [ ] 成本追踪 (token 使用)

- [ ] 集成
  - [ ] Slack Bot
  - [ ] API Server
  - [ ] Webhook 支持

- [ ] 更多数据库
  - [ ] BigQuery
  - [ ] Snowflake
  - [ ] DuckDB

#### 交付物
- 企业级功能
- API 服务
- Slack 集成

---

## 里程碑

| 里程碑 | 目标日期 | 状态 |
|--------|----------|------|
| 项目启动 | Week 0 | ✅ 完成 |
| v0.1.0 MVP | Week 2 | 🔄 进行中 |
| v0.2.0 增强版 | Week 4 | ⏳ 待开始 |
| v0.3.0 交互版 | Week 6 | ⏳ 待开始 |
| v0.4.0 企业版 | Week 9 | ⏳ 待开始 |

---

## 技术债务 & 优化

### 持续优化
- [ ] 单元测试覆盖率 > 80%
- [ ] E2E 测试套件
- [ ] 性能基准测试
- [ ] Prompt 优化迭代

### 文档
- [ ] API 文档
- [ ] Schema 规范文档
- [ ] 最佳实践指南
- [ ] 贡献指南

---

## 社区 & 生态

### 开源运营
- [ ] GitHub 仓库设置
- [ ] Issue/PR 模板
- [ ] CI/CD 流水线
- [ ] 发布自动化

### 生态建设
- [ ] Schema 模板库
- [ ] 插件系统设计
- [ ] 社区 Schema 共享

---

## 风险 & 依赖

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| LLM API 成本 | 高 | 支持本地模型，优化 token 使用 |
| Schema 质量依赖 | 高 | 提供 Schema 生成工具和验证 |
| 安全问题 | 高 | 沙箱隔离，命令白名单 |
| 多数据库兼容 | 中 | 抽象数据库层，渐进式支持 |
